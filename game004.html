<!DOCTYPE html>
<html lang="zh-Hans">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>识字消消乐 04 (马来文-中文)</title>
<style>
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(to right, #84fab0, #8fd3f4);
        color: #333;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        margin: 0;
        text-align: center;
        flex-direction: column;
    }
    .container {
        background: rgba(255, 255, 255, 0.9);
        padding: 20px 40px;
        border-radius: 20px;
        box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        width: 90%;
        max-width: 800px;
        position: relative;
    }
    h1, h2 {
        color: #00796b;
    }
    .word-list {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 10px;
        margin: 20px 0;
        padding: 0;
        list-style: none;
        text-align: left;
    }
    .word-list li {
        background-color: #e0f2f1;
        padding: 10px;
        border-radius: 8px;
        border-left: 5px solid #84fab0;
    }
    #game-board {
        display: grid;
        gap: 10px;
        margin-top: 20px;
        justify-content: center;
    }
    .card {
        background-color: #ffffff;
        border: 2px solid #8fd3f4;
        border-radius: 10px;
        padding: 15px;
        cursor: pointer;
        font-size: 1.1em;
        transition: background-color 0.3s, transform 0.3s, box-shadow 0.3s;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        display: flex;
        justify-content: center;
        align-items: center;
        height: 60px;
    }
    .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 16px rgba(0,0,0,0.2);
    }
    .card.selected {
        background-color: #4db6ac;
        border-color: #26a69a;
        color: #fff;
    }
    .card.matched {
        visibility: hidden;
        transform: scale(0.5);
        transition: visibility 0.3s, transform 0.3s;
    }
    #controls {
        margin-top: 20px;
        display: flex;
        justify-content: space-around;
        align-items: center;
    }
    .button {
        padding: 10px 20px;
        border-radius: 8px;
        border: none;
        background-color: #009688;
        color: white;
        font-size: 1em;
        cursor: pointer;
        transition: background-color 0.3s;
    }
    .button:hover {
        background-color: #00796b;
    }
    #score, #level-display {
        font-size: 1.2em;
        font-weight: bold;
        color: #00796b;
    }
    #review-page, #game-page {
        width: 100%;
    }
</style>
</head>
<body>

<div class="container">
    <div id="review-page">
        <h1>识字消消乐 04 - 生字复习</h1>
        <ul class="word-list">
            <li>tugas - 任务</li>
            <li>penuh - 充满</li>
            <li>rehat - 休息</li>
            <li>rakan - 同伴</li>
            <li>menjalankan - 执行</li>
            <li>memastikan - 确保</li>
            <li>pengawas - 巡查员</li>
            <li>ditugaskan - 被委派</li>
            <li>sama - 相同</li>
            <li>waktu - 时间</li>
            <li>makanan - 食物</li>
            <li>kantin - 食堂</li>
            <li>memberi - 给予</li>
            <li>nasihat - 劝告</li>
            <li>sekiranya - 如果</li>
            <li>tanggungjawab - 责任</li>
            <li>mengawasi - 监督</li>
            <li>membeli - 购买</li>
            <li>berhemah - 有礼貌地</li>
            <li>sikap - 态度</li>
        </ul>
        <button class="button" onclick="startGame()">开始游戏</button>
    </div>

    <div id="game-page" style="display:none;">
        <h1>识字消消乐 04</h1>
        <div id="controls">
            <span id="level-display">Level: 1</span>
            <button class="button" onclick="resetGame()">重新开始</button>
            <span id="score">分数: 0</span>
        </div>
        <div id="game-board"></div>
    </div>
</div>

<script>
const words = {
    easy: [
        { ms: 'tugas', zh: '任务' },
        { ms: 'penuh', zh: '充满' },
        { ms: 'rehat', zh: '休息' },
        { ms: 'rakan', zh: '同伴' }
    ],
    medium: [
        { ms: 'menjalankan', zh: '执行' },
        { ms: 'memastikan', zh: '确保' },
        { ms: 'ditugaskan', zh: '被委派' },
        { ms: 'waktu', zh: '时间' },
        { ms: 'makanan', zh: '食物' },
        { ms: 'kantin', zh: '食堂' },
        { ms: 'memberi', zh: '给予' },
        { ms: 'nasihat', zh: '劝告' }
    ],
    hard: [
        { ms: 'pengawas', zh: '巡查员' },
        { ms: 'sama', zh: '相同' },
        { ms: 'sekiranya', zh: '如果' },
        { ms: 'tanggungjawab', zh: '责任' },
        { ms: 'mengawasi', zh: '监督' },
        { ms: 'membeli', zh: '购买' },
        { ms: 'berhemah', zh: '有礼貌地' },
        { ms: 'sikap', zh: '态度' }
    ]
};

const levels = { 1: 4, 2: 8, 3: 12, 4: 20 };

let currentLevel = 1;
let score = 0;
let selectedCard = null;
let pairsToMatch = 0;

function startGame() {
    document.getElementById('review-page').style.display = 'none';
    document.getElementById('game-page').style.display = 'block';
    setupLevel(currentLevel);
}

function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

function setupLevel(level) {
    document.getElementById('level-display').textContent = `Level: ${level}`;
    const board = document.getElementById('game-board');
    board.innerHTML = '';
    
    let levelWords = [];
    if (level === 1) {
        levelWords = words.easy.slice(0, 2);
    } else if (level === 2) {
        levelWords = [...words.easy.slice(0, 2), ...words.medium.slice(0, 2)];
    } else if (level === 3) {
         levelWords = [...words.easy.slice(0, 2), ...words.medium.slice(0, 4)];
    } else { 
        levelWords = [...words.easy, ...words.medium, ...words.hard];
    }
    
    pairsToMatch = levelWords.length;
    let cards = [];
    levelWords.forEach(word => {
        cards.push({ text: word.ms, pair: word.zh });
        cards.push({ text: word.zh, pair: word.ms });
    });

    cards = shuffle(cards);
    
    const numCards = cards.length;
    let columns = 4;
    if (numCards === 4) columns = 2;
    if (numCards > 16) columns = 5;

    board.style.gridTemplateColumns = `repeat(${columns}, auto)`;

    cards.forEach(card => {
        const cardElement = document.createElement('div');
        cardElement.classList.add('card');
        cardElement.textContent = card.text;
        cardElement.dataset.text = card.text;
        cardElement.dataset.pair = card.pair;
        cardElement.addEventListener('click', onCardClick);
        board.appendChild(cardElement);
    });
}

function onCardClick(e) {
    const clickedCard = e.target;
    if (clickedCard.classList.contains('matched') || clickedCard === selectedCard) return;
    clickedCard.classList.add('selected');
    if (selectedCard) {
        if (selectedCard.dataset.text === clickedCard.dataset.pair && selectedCard.dataset.pair === clickedCard.dataset.text) {
            setTimeout(() => {
                selectedCard.classList.add('matched');
                clickedCard.classList.add('matched');
                score += 10;
                document.getElementById('score').textContent = `分数: ${score}`;
                selectedCard = null;
                pairsToMatch--;
                if (pairsToMatch === 0) {
                    levelUp();
                }
            }, 300);
        } else {
            setTimeout(() => {
                selectedCard.classList.remove('selected');
                clickedCard.classList.remove('selected');
                selectedCard = null;
            }, 500);
        }
    } else {
        selectedCard = clickedCard;
    }
}

function levelUp() {
    if (currentLevel < 4) {
        currentLevel++;
        setTimeout(() => {
            alert(`恭喜! 进入 Level ${currentLevel}!`);
            setupLevel(currentLevel);
        }, 500);
    } else {
        setTimeout(() => {
            alert(`太棒了！您已完成所有关卡！总分: ${score}`);
        }, 500);
    }
}

function resetGame() {
    currentLevel = 1;
    score = 0;
    selectedCard = null;
    document.getElementById('score').textContent = `分数: 0`;
    startGame();
}
</script>
</body>
</html>